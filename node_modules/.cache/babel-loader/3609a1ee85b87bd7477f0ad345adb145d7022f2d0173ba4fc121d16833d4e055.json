{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ALIENWARE\\\\Documents\\\\inventario-app\\\\src\\\\components\\\\CotizacionForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CotizacionForm({\n  setCotizaciones\n}) {\n  _s();\n  const [cliente, setCliente] = useState('');\n  const [clientes, setClientes] = useState([]);\n  const [productos, setProductos] = useState([]);\n  const [asunto, setAsunto] = useState('');\n  const [fechaCotizacion, setFechaCotizacion] = useState(getCurrentDate());\n  const [fechaVencimiento, setFechaVencimiento] = useState('');\n  const [productoSeleccionado, setProductoSeleccionado] = useState('');\n  const [productosSeleccionados, setProductosSeleccionados] = useState([]);\n  const [mostrarPrevia, setMostrarPrevia] = useState(false);\n  const [numeroCotizacion, setNumeroCotizacion] = useState(1);\n  useEffect(() => {\n    obtenerClientes();\n    obtenerProductos();\n  }, []);\n  const obtenerClientes = async () => {\n    try {\n      const clientesSnapshot = await getDocs(collection(db, 'clientes'));\n      const listaClientes = clientesSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setClientes(listaClientes);\n    } catch (error) {\n      console.error('Error al obtener clientes:', error);\n    }\n  };\n  const obtenerProductos = async () => {\n    try {\n      const productosSnapshot = await getDocs(collection(db, 'productos'));\n      const listaProductos = productosSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        tipoDescuento: 'cantidad',\n        valorDescuento: 0\n      }));\n      setProductos(listaProductos);\n    } catch (error) {\n      console.error('Error al obtener los productos:', error);\n    }\n  };\n  function getCurrentDate() {\n    const date = new Date();\n    return date.toISOString().split('T')[0];\n  }\n  function agregarProducto() {\n    if (productoSeleccionado) {\n      const producto = productos.find(p => p.id === productoSeleccionado);\n      if (producto) {\n        setProductosSeleccionados([...productosSeleccionados, {\n          ...producto,\n          productoIdEditado: producto.id\n        }]);\n        setProductoSeleccionado('');\n      }\n    }\n  }\n  const eliminarProducto = idProducto => {\n    setProductosSeleccionados(prevProductos => prevProductos.filter(producto => producto.id !== idProducto));\n  };\n  const actualizarCantidad = (idProducto, cantidad) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? {\n      ...producto,\n      cantidad: cantidad !== '' ? Number(cantidad) : 0,\n      subtotal: (cantidad !== '' ? Number(cantidad) : 0) * producto.costo\n    } : producto));\n  };\n  const guardarCotizacion = async () => {\n    const nuevaCotizacion = {\n      cliente: cliente,\n      asunto: asunto,\n      fechaCotizacion: fechaCotizacion,\n      fechaVencimiento: fechaVencimiento,\n      productos: productosSeleccionados,\n      numeroCotizacion: numeroCotizacion,\n      estado: 'Pendiente',\n      // Añade un estado por defecto\n      total: calcularTotal(),\n      // Calcular el total\n      timestamp: serverTimestamp() // Añadir la marca de tiempo del servidor\n    };\n    try {\n      // Guardar la cotización en la base de datos\n      const docRef = await addDoc(collection(db, 'cotizaciones'), nuevaCotizacion);\n      console.log('Cotización guardada con ID: ', docRef.id);\n\n      // Actualizar el estado de las cotizaciones con la nueva cotización\n      setCotizaciones(prevCotizaciones => [...prevCotizaciones, {\n        ...nuevaCotizacion,\n        id: docRef.id\n      }]);\n\n      // Restablecer los campos del formulario después de guardar la cotización\n      setCliente('');\n      setAsunto('');\n      setFechaVencimiento('');\n      setProductosSeleccionados([]);\n      setNumeroCotizacion(prevNumero => prevNumero + 1); // Incrementar el número de cotización\n    } catch (error) {\n      console.error('Error al guardar la cotización:', error);\n    }\n  };\n  const calcularTotal = () => {\n    return productosSeleccionados.reduce((total, producto) => {\n      return total + producto.subtotal;\n    }, 0);\n  };\n  function agregarProductoAutomatico(e) {\n    const productoId = e.target.value;\n    const producto = productos.find(p => p.id === productoId);\n    if (producto) {\n      const productoExistente = productosSeleccionados.find(p => p.id === productoId);\n      if (productoExistente) {\n        // Si el producto ya existe, aumentar la cantidad en 1\n        const nuevaCantidad = productoExistente.cantidad + 1;\n        actualizarCantidad(productoExistente.id, nuevaCantidad);\n      } else {\n        // Calcular subtotal para 1 cantidad\n        const subtotal = producto.costo;\n        // Establecer la cantidad en 1 por defecto\n        const productoConCantidad = {\n          ...producto,\n          cantidad: 1,\n          subtotal,\n          productoIdEditado: producto.id\n        };\n        setProductosSeleccionados([...productosSeleccionados, productoConCantidad]);\n        setProductoSeleccionado('');\n      }\n    }\n  }\n  const actualizarDescuento = (idProducto, tipoDescuento, valorDescuento) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? calcularDescuento(producto, tipoDescuento, valorDescuento) : producto));\n  };\n  const calcularDescuento = (producto, tipoDescuento, valorDescuento) => {\n    let subtotal = producto.cantidad * producto.costo;\n    let descuentoAplicado = 0;\n    if (tipoDescuento === 'cantidad') {\n      subtotal -= valorDescuento;\n      descuentoAplicado = valorDescuento;\n    } else if (tipoDescuento === 'porcentaje') {\n      const descuento = subtotal * valorDescuento / 100;\n      subtotal -= descuento;\n      descuentoAplicado = descuento;\n    }\n    return {\n      ...producto,\n      tipoDescuento,\n      valorDescuento,\n      subtotal,\n      descuento: descuentoAplicado\n    };\n  };\n  const actualizarIdProducto = (idProducto, nuevoId) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? {\n      ...producto,\n      productoIdEditado: nuevoId\n    } : producto));\n  };\n  const actualizarNombreProducto = (idProducto, nuevoNombre) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? {\n      ...producto,\n      nombre: nuevoNombre\n    } : producto));\n  };\n  const actualizarPrecio = (idProducto, nuevoPrecio) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? {\n      ...producto,\n      costo: parseFloat(nuevoPrecio),\n      subtotal: parseFloat(nuevoPrecio) * producto.cantidad\n    } : producto));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cotizacion-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cotizacion-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/img/logo-iciamex.png\",\n          alt: \"ICIAMEX\",\n          className: \"logoCotizacion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"cotizacion-title\",\n          children: \"Cotizaci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cotizacion-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cliente\",\n          children: \"Cliente:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"cliente\",\n          name: \"cliente\",\n          value: cliente,\n          onChange: e => setCliente(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Seleccionar cliente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), clientes.map(cliente => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: cliente.id,\n            children: cliente.empresa\n          }, cliente.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"asunto\",\n          children: \"Asunto:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"asunto\",\n          name: \"asunto\",\n          value: asunto,\n          onChange: e => setAsunto(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 117\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fecha-cotizacion\",\n          children: \"Fecha de cotizaci\\xF3n:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"fecha-cotizacion\",\n          name: \"fecha-cotizacion\",\n          value: getCurrentDate(),\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 112\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fecha-vencimiento\",\n          children: \"Fecha de vencimiento:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          id: \"fecha-vencimiento\",\n          name: \"fecha-vencimiento\",\n          value: fechaVencimiento,\n          onChange: e => setFechaVencimiento(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 159\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"productos\",\n          children: \"Agregar Producto:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"productos\",\n          name: \"productos\",\n          value: productoSeleccionado,\n          onChange: agregarProductoAutomatico,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Seleccionar producto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), productos.map(producto => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: producto.id,\n            children: producto.nombre\n          }, producto.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: agregarProducto,\n          children: \"Agregar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Resumen:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"productos-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Cantidad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Descripci\\xF3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Precio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Descuento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Subtotal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: productosSeleccionados.map(producto => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: producto.cantidad !== undefined ? producto.cantidad : '',\n                  onChange: e => actualizarCantidad(producto.id, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: producto.productoIdEditado // Utilizamos el estado local actualizado\n                  ,\n                  onChange: e => actualizarIdProducto(producto.id, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: producto.nombre,\n                  onChange: e => actualizarNombreProducto(producto.id, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: parseFloat(producto.costo).toFixed(2),\n                  onChange: e => {\n                    actualizarPrecio(producto.id, e.target.value);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  value: producto.tipoDescuento,\n                  onChange: e => actualizarDescuento(producto.id, e.target.value, producto.valorDescuento),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"cantidad\",\n                    children: \"$\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"porcentaje\",\n                    children: \"%\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 21\n                }, this), producto.tipoDescuento === 'porcentaje' && '%', /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: producto.valorDescuento,\n                  onChange: e => actualizarDescuento(producto.id, producto.tipoDescuento, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"$\", parseFloat(producto.subtotal).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => eliminarProducto(producto.id),\n                  children: \"\\u2718\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this)]\n            }, producto.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Guardado por \\xFAltima vez: Hoy a las 4:30 p.m\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: guardarCotizacion,\n          children: \"Guardar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), mostrarPrevia && /*#__PURE__*/_jsxDEV(PreviaCotizacion, {\n      cliente: cliente,\n      clientes: clientes,\n      asunto: asunto,\n      fechaCotizacion: fechaCotizacion,\n      productosSeleccionados: productosSeleccionados,\n      eliminarProducto: eliminarProducto,\n      actualizarCantidad: actualizarCantidad,\n      numeroCotizacion: numeroCotizacion\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n}\n_s(CotizacionForm, \"OvfVFUJg9DBdA6REzto5/+bxo3g=\");\n_c = CotizacionForm;\nfunction PreviaCotizacion({\n  cliente,\n  clientes,\n  asunto,\n  fechaCotizacion,\n  productosSeleccionados,\n  eliminarProducto,\n  actualizarDescuento,\n  numeroCotizacion\n}) {\n  var _clientes$find;\n  // Obtener el nombre del cliente\n  const nombreCliente = ((_clientes$find = clientes.find(c => c.id === cliente)) === null || _clientes$find === void 0 ? void 0 : _clientes$find.empresa) || '';\n\n  // Función para calcular los totales, incluyendo el descuento\n  const calcularTotales = () => {\n    let subtotal = 0;\n    let descuentoTotal = 0;\n    productosSeleccionados.forEach(producto => {\n      subtotal += parseFloat(producto.subtotal);\n      descuentoTotal += parseFloat(producto.descuento) || 0;\n    });\n    const iva = subtotal * 0.16;\n    const total = subtotal + iva - descuentoTotal;\n    return {\n      subtotal,\n      iva,\n      total,\n      descuentoTotal\n    };\n  };\n  const {\n    subtotal,\n    iva,\n    total,\n    descuentoTotal\n  } = calcularTotales();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"previa-cotizacion\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Previa\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Cotizaci\\xF3n: \", numeroCotizacion.toString().padStart(4, '0')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Fecha de cotizaci\\xF3n: \", fechaCotizacion]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Asunto: \", asunto]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Cliente: \", nombreCliente]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"DESCRIPCI\\xD3N\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Subtotal: $\", subtotal.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Descuento: $\", descuentoTotal.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"IVA: $\", iva.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Total: $\", total.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 333,\n    columnNumber: 5\n  }, this);\n}\n_c2 = PreviaCotizacion;\nexport default CotizacionForm;\nvar _c, _c2;\n$RefreshReg$(_c, \"CotizacionForm\");\n$RefreshReg$(_c2, \"PreviaCotizacion\");","map":{"version":3,"names":["React","useState","useEffect","collection","getDocs","addDoc","serverTimestamp","db","jsxDEV","_jsxDEV","CotizacionForm","setCotizaciones","_s","cliente","setCliente","clientes","setClientes","productos","setProductos","asunto","setAsunto","fechaCotizacion","setFechaCotizacion","getCurrentDate","fechaVencimiento","setFechaVencimiento","productoSeleccionado","setProductoSeleccionado","productosSeleccionados","setProductosSeleccionados","mostrarPrevia","setMostrarPrevia","numeroCotizacion","setNumeroCotizacion","obtenerClientes","obtenerProductos","clientesSnapshot","listaClientes","docs","map","doc","id","data","error","console","productosSnapshot","listaProductos","tipoDescuento","valorDescuento","date","Date","toISOString","split","agregarProducto","producto","find","p","productoIdEditado","eliminarProducto","idProducto","prevProductos","filter","actualizarCantidad","cantidad","Number","subtotal","costo","guardarCotizacion","nuevaCotizacion","estado","total","calcularTotal","timestamp","docRef","log","prevCotizaciones","prevNumero","reduce","agregarProductoAutomatico","e","productoId","target","value","productoExistente","nuevaCantidad","productoConCantidad","actualizarDescuento","calcularDescuento","descuentoAplicado","descuento","actualizarIdProducto","nuevoId","actualizarNombreProducto","nuevoNombre","nombre","actualizarPrecio","nuevoPrecio","parseFloat","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","name","onChange","empresa","type","readOnly","onClick","undefined","toFixed","PreviaCotizacion","_c","_clientes$find","nombreCliente","c","calcularTotales","descuentoTotal","forEach","iva","toString","padStart","_c2","$RefreshReg$"],"sources":["C:/Users/ALIENWARE/Documents/inventario-app/src/components/CotizacionForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { collection, getDocs, addDoc, serverTimestamp  } from 'firebase/firestore';\r\nimport { db } from '../firebaseConfig';\r\n\r\nfunction CotizacionForm({ setCotizaciones}) {\r\n  const [cliente, setCliente] = useState('');\r\n  const [clientes, setClientes] = useState([]);\r\n  const [productos, setProductos] = useState([]);\r\n  const [asunto, setAsunto] = useState('');\r\n  const [fechaCotizacion, setFechaCotizacion] = useState(getCurrentDate());\r\n  const [fechaVencimiento, setFechaVencimiento] = useState('');\r\n  const [productoSeleccionado, setProductoSeleccionado] = useState('');\r\n  const [productosSeleccionados, setProductosSeleccionados] = useState([]);\r\n  const [mostrarPrevia, setMostrarPrevia] = useState(false);\r\n  const [numeroCotizacion, setNumeroCotizacion] = useState(1);\r\n\r\n\r\n  useEffect(() => {\r\n    obtenerClientes();\r\n    obtenerProductos();\r\n  }, []);\r\n\r\n  const obtenerClientes = async () => {\r\n    try {\r\n      const clientesSnapshot = await getDocs(collection(db, 'clientes'));\r\n      const listaClientes = clientesSnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n      setClientes(listaClientes);\r\n    } catch (error) {\r\n      console.error('Error al obtener clientes:', error);\r\n    }\r\n  };\r\n\r\n  const obtenerProductos = async () => {\r\n    try {\r\n      const productosSnapshot = await getDocs(collection(db, 'productos'));\r\n      const listaProductos = productosSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data(), tipoDescuento: 'cantidad', valorDescuento: 0 }));\r\n      setProductos(listaProductos);\r\n    } catch (error) {\r\n      console.error('Error al obtener los productos:', error);\r\n    }\r\n  };\r\n\r\n  function getCurrentDate() {\r\n    const date = new Date();\r\n    return date.toISOString().split('T')[0];\r\n  }\r\n\r\n  function agregarProducto() {\r\n    if (productoSeleccionado) {\r\n      const producto = productos.find(p => p.id === productoSeleccionado);\r\n      if (producto) {\r\n        setProductosSeleccionados([...productosSeleccionados, { ...producto, productoIdEditado: producto.id }]);\r\n        setProductoSeleccionado('');\r\n      }\r\n    }\r\n  }\r\n\r\n  const eliminarProducto = (idProducto) => {\r\n    setProductosSeleccionados(prevProductos => prevProductos.filter(producto => producto.id !== idProducto));\r\n  };\r\n\r\n  const actualizarCantidad = (idProducto, cantidad) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? { ...producto, cantidad: cantidad !== '' ? Number(cantidad) : 0, subtotal: (cantidad !== '' ? Number(cantidad) : 0) * producto.costo } : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  const guardarCotizacion = async () => {\r\n    const nuevaCotizacion = {\r\n      cliente: cliente,\r\n      asunto: asunto,\r\n      fechaCotizacion: fechaCotizacion,\r\n      fechaVencimiento: fechaVencimiento,\r\n      productos: productosSeleccionados,\r\n      numeroCotizacion: numeroCotizacion,\r\n      estado: 'Pendiente', // Añade un estado por defecto\r\n      total: calcularTotal(), // Calcular el total\r\n      timestamp: serverTimestamp() // Añadir la marca de tiempo del servidor\r\n    };\r\n\r\n    try {\r\n      // Guardar la cotización en la base de datos\r\n      const docRef = await addDoc(collection(db, 'cotizaciones'), nuevaCotizacion);\r\n      console.log('Cotización guardada con ID: ', docRef.id);\r\n      \r\n      // Actualizar el estado de las cotizaciones con la nueva cotización\r\n      setCotizaciones(prevCotizaciones => [...prevCotizaciones, {...nuevaCotizacion, id: docRef.id}]);\r\n\r\n      // Restablecer los campos del formulario después de guardar la cotización\r\n      setCliente('');\r\n      setAsunto('');\r\n      setFechaVencimiento('');\r\n      setProductosSeleccionados([]);\r\n      setNumeroCotizacion(prevNumero => prevNumero + 1); // Incrementar el número de cotización\r\n    } catch (error) {\r\n      console.error('Error al guardar la cotización:', error);\r\n    }\r\n  };\r\n\r\n  const calcularTotal = () => {\r\n    return productosSeleccionados.reduce((total, producto) => {\r\n      return total + producto.subtotal;\r\n    }, 0);\r\n  };\r\n  \r\n\r\n  function agregarProductoAutomatico(e) {\r\n    const productoId = e.target.value;\r\n    const producto = productos.find(p => p.id === productoId);\r\n    if (producto) {\r\n      const productoExistente = productosSeleccionados.find(p => p.id === productoId);\r\n      if (productoExistente) {\r\n        // Si el producto ya existe, aumentar la cantidad en 1\r\n        const nuevaCantidad = productoExistente.cantidad + 1;\r\n        actualizarCantidad(productoExistente.id, nuevaCantidad);\r\n      } else {\r\n        // Calcular subtotal para 1 cantidad\r\n        const subtotal = producto.costo;\r\n        // Establecer la cantidad en 1 por defecto\r\n        const productoConCantidad = { ...producto, cantidad: 1, subtotal, productoIdEditado: producto.id };\r\n        setProductosSeleccionados([...productosSeleccionados, productoConCantidad]);\r\n        setProductoSeleccionado('');\r\n      }\r\n    }\r\n  }\r\n  \r\n\r\n  const actualizarDescuento = (idProducto, tipoDescuento, valorDescuento) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? calcularDescuento(producto, tipoDescuento, valorDescuento) : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  const calcularDescuento = (producto, tipoDescuento, valorDescuento) => {\r\n    let subtotal = producto.cantidad * producto.costo;\r\n    let descuentoAplicado = 0;\r\n\r\n    if (tipoDescuento === 'cantidad') {\r\n      subtotal -= valorDescuento;\r\n      descuentoAplicado = valorDescuento;\r\n    } else if (tipoDescuento === 'porcentaje') {\r\n      const descuento = (subtotal * valorDescuento) / 100;\r\n      subtotal -= descuento;\r\n      descuentoAplicado = descuento;\r\n    }\r\n\r\n    return { ...producto, tipoDescuento, valorDescuento, subtotal, descuento: descuentoAplicado };\r\n  };\r\n\r\n  const actualizarIdProducto = (idProducto, nuevoId) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? { ...producto, productoIdEditado: nuevoId } : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  const actualizarNombreProducto = (idProducto, nuevoNombre) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? { ...producto, nombre: nuevoNombre } : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  const actualizarPrecio = (idProducto, nuevoPrecio) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? { ...producto, costo: parseFloat(nuevoPrecio), subtotal: parseFloat(nuevoPrecio) * producto.cantidad } : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"cotizacion-form\">\r\n      <form>\r\n        <div className=\"cotizacion-header\">\r\n          <img src=\"/img/logo-iciamex.png\" alt=\"ICIAMEX\" className=\"logoCotizacion\" />\r\n          <div className=\"border-right\"></div>\r\n          <h1 className=\"cotizacion-title\">Cotización</h1>\r\n        </div>\r\n\r\n        <div className=\"cotizacion-body\">\r\n          <label htmlFor=\"cliente\">Cliente:</label>\r\n          <select id=\"cliente\" name=\"cliente\" value={cliente} onChange={(e) => setCliente(e.target.value)}>\r\n            <option value=\"\">Seleccionar cliente</option>\r\n            {clientes.map((cliente) => (\r\n              <option key={cliente.id} value={cliente.id}>\r\n                {cliente.empresa}\r\n              </option>\r\n            ))}\r\n          </select><br />\r\n\r\n          <label htmlFor=\"asunto\">Asunto:</label>\r\n          <input type=\"text\" id=\"asunto\" name=\"asunto\" value={asunto} onChange={(e) => setAsunto(e.target.value)} /><br />\r\n\r\n          <label htmlFor=\"fecha-cotizacion\">Fecha de cotización:</label>\r\n          <input type=\"text\" id=\"fecha-cotizacion\" name=\"fecha-cotizacion\" value={getCurrentDate()} readOnly /><br />\r\n\r\n          <label htmlFor=\"fecha-vencimiento\">Fecha de vencimiento:</label>\r\n          <input type=\"date\" id=\"fecha-vencimiento\" name=\"fecha-vencimiento\" value={fechaVencimiento} onChange={(e) => setFechaVencimiento(e.target.value)} /><br />\r\n\r\n          <label htmlFor=\"productos\">Agregar Producto:</label>\r\n          <select id=\"productos\" name=\"productos\" value={productoSeleccionado} onChange={agregarProductoAutomatico}>\r\n            <option value=\"\">Seleccionar producto</option>\r\n            {productos.map((producto) => (\r\n              <option key={producto.id} value={producto.id}>\r\n                {producto.nombre}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <button type=\"button\" onClick={agregarProducto}>Agregar</button>\r\n\r\n          <h2>Resumen:</h2>\r\n          <table className=\"productos-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Cantidad</th>\r\n                <th>ID</th>\r\n                <th>Descripción</th>\r\n                <th>Precio</th>\r\n                <th>Descuento</th>\r\n                <th>Subtotal</th>\r\n                <th>Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {productosSeleccionados.map((producto) => (\r\n                <tr key={producto.id}>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={producto.cantidad !== undefined ? producto.cantidad : ''}\r\n                      onChange={(e) => actualizarCantidad(producto.id, e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={producto.productoIdEditado} // Utilizamos el estado local actualizado\r\n                      onChange={(e) => actualizarIdProducto(producto.id, e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={producto.nombre}\r\n                      onChange={(e) => actualizarNombreProducto(producto.id, e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={parseFloat(producto.costo).toFixed(2)}\r\n                      onChange={(e) => {\r\n                        actualizarPrecio(producto.id, e.target.value);\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <select\r\n                      value={producto.tipoDescuento}\r\n                      onChange={(e) => actualizarDescuento(producto.id, e.target.value, producto.valorDescuento)}\r\n                    >\r\n                      <option value=\"cantidad\">$</option>\r\n                      <option value=\"porcentaje\">%</option>\r\n                    </select>\r\n                    {producto.tipoDescuento === 'porcentaje' && '%'}\r\n                    <input\r\n                      type=\"text\"\r\n                      value={producto.valorDescuento}\r\n                      onChange={(e) => actualizarDescuento(producto.id, producto.tipoDescuento, e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>${parseFloat(producto.subtotal).toFixed(2)}</td>\r\n                  <td>\r\n                    <button onClick={() => eliminarProducto(producto.id)}>✘</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          <p>Guardado por última vez: Hoy a las 4:30 p.m</p>\r\n          <button type=\"button\">Cancelar</button>\r\n          <button type=\"button\" onClick={guardarCotizacion}>Guardar</button>\r\n        </div>\r\n      </form>\r\n\r\n      {mostrarPrevia && (\r\n        <PreviaCotizacion\r\n          cliente={cliente}\r\n          clientes={clientes}\r\n          asunto={asunto}\r\n          fechaCotizacion={fechaCotizacion}\r\n          productosSeleccionados={productosSeleccionados}\r\n          eliminarProducto={eliminarProducto}\r\n          actualizarCantidad={actualizarCantidad}\r\n          numeroCotizacion={numeroCotizacion}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PreviaCotizacion({ cliente, clientes, asunto, fechaCotizacion, productosSeleccionados, eliminarProducto, actualizarDescuento, numeroCotizacion }) {\r\n  // Obtener el nombre del cliente\r\n  const nombreCliente = clientes.find(c => c.id === cliente)?.empresa || '';\r\n\r\n  // Función para calcular los totales, incluyendo el descuento\r\n  const calcularTotales = () => {\r\n    let subtotal = 0;\r\n    let descuentoTotal = 0;\r\n  \r\n    productosSeleccionados.forEach(producto => {\r\n      subtotal += parseFloat(producto.subtotal);\r\n      descuentoTotal += parseFloat(producto.descuento) || 0;\r\n    });\r\n  \r\n    const iva = subtotal * 0.16;\r\n    const total = subtotal + iva - descuentoTotal;\r\n  \r\n    return { subtotal, iva, total, descuentoTotal };\r\n  };\r\n\r\n  const { subtotal, iva, total, descuentoTotal } = calcularTotales();\r\n\r\n  return (\r\n    <div className=\"previa-cotizacion\">\r\n      <h1>Previa</h1>\r\n      <h2>Cotización: {numeroCotizacion.toString().padStart(4, '0')}</h2>\r\n      <hr />\r\n      <p>Fecha de cotización: {fechaCotizacion}</p>\r\n      <p>Asunto: {asunto}</p>\r\n      <p>Cliente: {nombreCliente}</p> {/* Mostrar nombre del cliente */}\r\n      <h3>DESCRIPCIÓN</h3>\r\n      {/* Aquí puedes agregar los productos seleccionados */}\r\n      <h3>Subtotal: ${subtotal.toFixed(2)}</h3>\r\n      <h3>Descuento: ${descuentoTotal.toFixed(2)}</h3>\r\n      <h3>IVA: ${iva.toFixed(2)}</h3>\r\n      <h3>Total: ${total.toFixed(2)}</h3>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CotizacionForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}