{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ALIENWARE\\\\Documents\\\\inventario-app\\\\src\\\\components\\\\CotizacionForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport { collection, getDocs, serverTimestamp } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport TablaCotizaciones from './TablaCotizaciones';\nimport Modal from 'react-modal';\n\n// Establece la función de inicialización de react-modal para evitar un aviso de desenfoque de accesibilidad\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nModal.setAppElement('#root');\nconst customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    border: 'none',\n    borderRadius: '8px',\n    boxShadow: '0 4px 8px rgba(0, 0, 0, 0.1)',\n    padding: '20px',\n    maxWidth: '900px',\n    width: '100%',\n    height: \"500px\",\n    maxHeight: '90vh',\n    overflow: 'auto',\n    fontFamily: 'Roboto, sans-serif' // Aplica la fuente Roboto\n  },\n  label: {\n    display: 'block',\n    marginBottom: '10px'\n  },\n  input: {\n    width: '100%',\n    padding: '8px',\n    marginBottom: '20px',\n    borderRadius: '5px',\n    border: '1px solid #ccc',\n    boxSizing: 'border-box'\n  },\n  button: {\n    width: '50%',\n    // Centra el botón de agregar\n    padding: '10px',\n    borderRadius: '5px',\n    backgroundColor: '#007bff',\n    color: '#fff',\n    border: 'none',\n    cursor: 'pointer',\n    fontSize: '16px',\n    display: 'flex',\n    justifyContent: 'center',\n    margin: \"0 auto\",\n    fontWeight: \"700\"\n  }\n};\nfunction CotizacionForm(props) {\n  _s();\n  const [cliente, setCliente] = useState('');\n  const [clientes, setClientes] = useState([]);\n  const [productos, setProductos] = useState([]);\n  const [asunto, setAsunto] = useState('');\n  const [fechaCotizacion] = useState(getCurrentDate());\n  const [fechaVencimiento, setFechaVencimiento] = useState('');\n  const [productoSeleccionado, setProductoSeleccionado] = useState('');\n  const [productosSeleccionados, setProductosSeleccionados] = useState([]);\n  const [mostrarTabla, setMostrarTabla] = useState(false);\n  const [mostrarPrevia, setMostrarPrevia] = useState(false);\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [ultimaInteraccion, setUltimaInteraccion] = useState('');\n  useEffect(() => {\n    // Al cargar la página, intenta obtener la última interacción del almacenamiento local\n    const ultimaInteraccionGuardada = localStorage.getItem('ultimaInteraccion');\n    if (ultimaInteraccionGuardada) {\n      setUltimaInteraccion(ultimaInteraccionGuardada);\n    } else {\n      actualizarUltimaInteraccion(); // Si no hay ninguna guardada, muestra la hora actual\n    }\n  }, []);\n  useEffect(() => {\n    obtenerClientes();\n    obtenerProductos();\n  }, []);\n  const abrirModalPrevia = cotizacion => {\n    setCotizacionSeleccionada(cotizacion);\n    setMostrarPrevia(true);\n  };\n  const cerrarModalPrevia = () => {\n    setMostrarPrevia(false);\n    setModalIsOpen(false);\n  };\n  const calcularTotal = () => {\n    return productosSeleccionados.reduce((total, producto) => {\n      return total + producto.subtotal;\n    }, 0);\n  };\n  const obtenerClientes = async () => {\n    try {\n      const clientesSnapshot = await getDocs(collection(db, 'clientes'));\n      const listaClientes = clientesSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setClientes(listaClientes);\n    } catch (error) {\n      console.error('Error al obtener clientes:', error);\n    }\n  };\n  const obtenerProductos = async () => {\n    try {\n      const productosSnapshot = await getDocs(collection(db, 'productos'));\n      const listaProductos = productosSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        tipoDescuento: 'cantidad',\n        valorDescuento: 0\n      }));\n      setProductos(listaProductos);\n    } catch (error) {\n      console.error('Error al obtener los productos:', error);\n    }\n  };\n  const continuarDesdePrevia = () => {\n    setMostrarTabla(true);\n  };\n  function getCurrentDate() {\n    const date = new Date();\n    return date.toISOString().split('T')[0];\n  }\n\n  /*function agregarProducto() {\r\n    if (productoSeleccionado) {\r\n      const producto = productos.find(p => p.id === productoSeleccionado);\r\n      if (producto) {\r\n        setProductosSeleccionados([...productosSeleccionados, { ...producto, productoIdEditado: producto.id }]);\r\n        setProductoSeleccionado('');\r\n      }\r\n    }\r\n  }*/\n\n  const eliminarProducto = idProducto => {\n    setProductosSeleccionados(prevProductos => prevProductos.filter(producto => producto.id !== idProducto));\n  };\n  const actualizarCantidad = (idProducto, cantidad) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? {\n      ...producto,\n      cantidad: cantidad !== '' ? Number(cantidad) : 0,\n      subtotal: (cantidad !== '' ? Number(cantidad) : 0) * producto.costo\n    } : producto));\n  };\n  function agregarProductoAutomatico(e) {\n    const productoId = e.target.value;\n    const producto = productos.find(p => p.id === productoId);\n    if (producto) {\n      const productoExistente = productosSeleccionados.find(p => p.id === productoId);\n      if (productoExistente) {\n        const nuevaCantidad = productoExistente.cantidad + 1;\n        actualizarCantidad(productoExistente.id, nuevaCantidad);\n      } else {\n        const subtotal = producto.costo;\n        const productoConCantidad = {\n          ...producto,\n          cantidad: 1,\n          subtotal,\n          productoIdEditado: producto.id\n        };\n        setProductosSeleccionados([...productosSeleccionados, productoConCantidad]);\n        setProductoSeleccionado('');\n      }\n    }\n  }\n\n  // Función para actualizar la última interacción\n  const actualizarUltimaInteraccion = () => {\n    const ahora = new Date();\n    const hora = ahora.getHours();\n    const minutos = ahora.getMinutes();\n    const periodo = hora >= 12 ? 'p.m.' : 'a.m.';\n    const horaFormato12 = hora > 12 ? hora - 12 : hora;\n    const horaString = horaFormato12.toString().padStart(2, '0');\n    const minutosString = minutos.toString().padStart(2, '0');\n    const ultimaInteraccionString = `Hoy a las ${horaString}:${minutosString} ${periodo}`;\n\n    // Guarda la hora en el almacenamiento local\n    localStorage.setItem('ultimaInteraccion', ultimaInteraccionString);\n\n    // Actualiza el estado para mostrar la última interacción al usuario\n    setUltimaInteraccion(ultimaInteraccionString);\n  };\n  const guardar = async () => {\n    try {\n      const cotizacionData = {\n        cliente,\n        asunto,\n        fechaCotizacion,\n        fechaVencimiento,\n        productosSeleccionados,\n        total: calcularTotal(),\n        createdAt: serverTimestamp()\n      };\n      await props.guardarCotizacion(cotizacionData);\n      setMostrarPrevia(true);\n      actualizarUltimaInteraccion(); // Llama a la función para actualizar la última interacción al guardar\n      // Muestra la alerta de éxito\n      Swal.fire({\n        icon: 'success',\n        title: 'Cotización Guardada',\n        showConfirmButton: false,\n        timer: 1000 // Muestra la alerta por 1.5 segundos\n      });\n    } catch (error) {\n      console.error('Error al guardar la cotización:', error);\n    }\n  };\n  const actualizarDescuento = (idProducto, tipoDescuento, valorDescuento) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? calcularDescuento(producto, tipoDescuento, valorDescuento) : producto));\n  };\n  const calcularDescuento = (producto, tipoDescuento, valorDescuento) => {\n    let subtotal = producto.cantidad * producto.costo;\n    let descuentoAplicado = 0;\n    if (tipoDescuento === 'cantidad') {\n      subtotal -= valorDescuento;\n      descuentoAplicado = valorDescuento;\n    } else if (tipoDescuento === 'porcentaje') {\n      const descuento = subtotal * valorDescuento / 100;\n      subtotal -= descuento;\n      descuentoAplicado = descuento;\n    }\n    return {\n      ...producto,\n      tipoDescuento,\n      valorDescuento,\n      subtotal,\n      descuento: descuentoAplicado\n    };\n  };\n  const actualizarIdProducto = (idProducto, nuevoId) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? {\n      ...producto,\n      productoIdEditado: nuevoId\n    } : producto));\n  };\n  const actualizarNombreProducto = (idProducto, nuevoNombre) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? {\n      ...producto,\n      nombre: nuevoNombre\n    } : producto));\n  };\n  const actualizarPrecio = (idProducto, nuevoPrecio) => {\n    setProductosSeleccionados(prevProductos => prevProductos.map(producto => producto.id === idProducto ? {\n      ...producto,\n      costo: parseFloat(nuevoPrecio),\n      subtotal: parseFloat(nuevoPrecio) * producto.cantidad\n    } : producto));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cotizacion-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cotizacion-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/img/logo-iciamex.png\",\n          alt: \"ICIAMEX\",\n          className: \"logoCotizacion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"cotizacion-title\",\n          children: \"Cotizaci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cotizacion-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cliente\",\n          children: \"Cliente:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"cliente\",\n          name: \"cliente\",\n          value: cliente,\n          onChange: e => setCliente(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Seleccionar cliente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), clientes.map(cliente => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: cliente.id,\n            children: cliente.empresa\n          }, cliente.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"asunto\",\n          children: \"Asunto:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"asunto\",\n          name: \"asunto\",\n          value: asunto,\n          onChange: e => setAsunto(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 117\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fecha-cotizacion\",\n          children: \"Fecha de cotizaci\\xF3n:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"fecha-cotizacion\",\n          name: \"fecha-cotizacion\",\n          value: getCurrentDate(),\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 112\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fecha-vencimiento\",\n          children: \"Fecha de vencimiento:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          id: \"fecha-vencimiento\",\n          name: \"fecha-vencimiento\",\n          value: fechaVencimiento,\n          onChange: e => setFechaVencimiento(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 159\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"productos\",\n          children: \"Agregar Producto:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"productos\",\n          name: \"productos\",\n          value: productoSeleccionado,\n          onChange: agregarProductoAutomatico,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Seleccionar producto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this), productos.map(producto => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: producto.id,\n            children: producto.nombre\n          }, producto.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Resumen:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"productos-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Cantidad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Descripci\\xF3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Precio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Descuento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Subtotal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: productosSeleccionados.map(producto => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: producto.cantidad !== undefined ? producto.cantidad : '',\n                  onChange: e => actualizarCantidad(producto.id, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: producto.productoIdEditado,\n                  onChange: e => actualizarIdProducto(producto.id, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: producto.nombre,\n                  onChange: e => actualizarNombreProducto(producto.id, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: parseFloat(producto.costo).toFixed(2),\n                  onChange: e => {\n                    actualizarPrecio(producto.id, e.target.value);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  value: producto.tipoDescuento,\n                  onChange: e => actualizarDescuento(producto.id, e.target.value, producto.valorDescuento),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"cantidad\",\n                    children: \"$\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"porcentaje\",\n                    children: \"%\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 21\n                }, this), producto.tipoDescuento === 'porcentaje' && '%', /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: producto.valorDescuento,\n                  onChange: e => actualizarDescuento(producto.id, producto.tipoDescuento, e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"$\", parseFloat(producto.subtotal).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => eliminarProducto(producto.id),\n                  children: \"\\u2718\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 19\n              }, this)]\n            }, producto.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Guardado por \\xFAltima vez: \", ultimaInteraccion]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: abrirModalPrevia,\n          children: \"Vista Previa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: guardar,\n          children: \"Guardar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: modalIsOpen,\n      onRequestClose: cerrarModalPrevia,\n      contentLabel: \"Vista Previa\",\n      style: customStyles,\n      children: [mostrarPrevia && /*#__PURE__*/_jsxDEV(PreviaCotizacion, {\n        cliente: cliente,\n        clientes: clientes,\n        asunto: asunto,\n        fechaCotizacion: fechaCotizacion,\n        productosSeleccionados: productosSeleccionados,\n        continuarDesdePrevia: continuarDesdePrevia,\n        numeroCotizacion: props.numeroCotizacion\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: cerrarModalPrevia,\n          className: \"eliminarBtnModal\",\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Enviar por Correo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Descargar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this), !mostrarFormulario && /*#__PURE__*/_jsxDEV(TablaCotizaciones, {\n      cotizaciones: cotizaciones,\n      abrirModalPrevia: abrirModalPrevia\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 264,\n    columnNumber: 5\n  }, this);\n}\n_s(CotizacionForm, \"8hvvLAlJFLxy9+km0p0sMrCwyoc=\");\n_c = CotizacionForm;\nfunction PreviaCotizacion({\n  cliente,\n  clientes,\n  asunto,\n  fechaCotizacion,\n  productosSeleccionados,\n  numeroCotizacion\n}) {\n  var _clientes$find;\n  const nombreCliente = ((_clientes$find = clientes.find(c => c.id === cliente)) === null || _clientes$find === void 0 ? void 0 : _clientes$find.empresa) || '';\n\n  // Calcular subtotal\n  const subtotal = productosSeleccionados.reduce((acc, producto) => acc + parseFloat(producto.subtotal), 0);\n\n  // Calcular descuento total (suponiendo que hay un descuento en cada producto)\n  const descuentoTotal = productosSeleccionados.reduce((acc, producto) => acc + parseFloat(producto.descuento), 0);\n\n  // Calcular IVA\n  const iva = subtotal * 0.16; // Suponiendo que el IVA es del 16%\n\n  // Calcular total\n  const total = subtotal - descuentoTotal + iva;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"previa-cotizacion\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cotizacion-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/img/logo-iciamex.png\",\n        alt: \"ICIAMEX\",\n        className: \"logoCotizacion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-right\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"cotizacion-title\",\n        children: \"Cotizaci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Previa\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Cotizaci\\xF3n: \", numeroCotizacion === null || numeroCotizacion === void 0 ? void 0 : numeroCotizacion.toString().padStart(4, '0')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Fecha de cotizaci\\xF3n: \", fechaCotizacion]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Asunto: \", asunto]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Cliente: \", nombreCliente]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"DESCRIPCI\\xD3N\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"productos-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Cantidad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Descripci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Precio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Descuento\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Subtotal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: productosSeleccionados.map(producto => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: producto.cantidad\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: producto.productoIdEditado\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: producto.nombre\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"$\", parseFloat(producto.costo).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"$\", parseFloat(producto.descuento).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"$\", parseFloat(producto.subtotal).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 15\n          }, this)]\n        }, producto.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Subtotal: $\", subtotal.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Descuento: $\", descuentoTotal.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"IVA: $\", iva.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Total: $\", total.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 429,\n    columnNumber: 5\n  }, this);\n}\n_c2 = PreviaCotizacion;\nexport default CotizacionForm;\nvar _c, _c2;\n$RefreshReg$(_c, \"CotizacionForm\");\n$RefreshReg$(_c2, \"PreviaCotizacion\");","map":{"version":3,"names":["React","useState","useEffect","Swal","collection","getDocs","serverTimestamp","db","TablaCotizaciones","Modal","jsxDEV","_jsxDEV","setAppElement","customStyles","content","top","left","transform","border","borderRadius","boxShadow","padding","maxWidth","width","height","maxHeight","overflow","fontFamily","label","display","marginBottom","input","boxSizing","button","backgroundColor","color","cursor","fontSize","justifyContent","margin","fontWeight","CotizacionForm","props","_s","cliente","setCliente","clientes","setClientes","productos","setProductos","asunto","setAsunto","fechaCotizacion","getCurrentDate","fechaVencimiento","setFechaVencimiento","productoSeleccionado","setProductoSeleccionado","productosSeleccionados","setProductosSeleccionados","mostrarTabla","setMostrarTabla","mostrarPrevia","setMostrarPrevia","modalIsOpen","setModalIsOpen","ultimaInteraccion","setUltimaInteraccion","ultimaInteraccionGuardada","localStorage","getItem","actualizarUltimaInteraccion","obtenerClientes","obtenerProductos","abrirModalPrevia","cotizacion","setCotizacionSeleccionada","cerrarModalPrevia","calcularTotal","reduce","total","producto","subtotal","clientesSnapshot","listaClientes","docs","map","doc","id","data","error","console","productosSnapshot","listaProductos","tipoDescuento","valorDescuento","continuarDesdePrevia","date","Date","toISOString","split","eliminarProducto","idProducto","prevProductos","filter","actualizarCantidad","cantidad","Number","costo","agregarProductoAutomatico","e","productoId","target","value","find","p","productoExistente","nuevaCantidad","productoConCantidad","productoIdEditado","ahora","hora","getHours","minutos","getMinutes","periodo","horaFormato12","horaString","toString","padStart","minutosString","ultimaInteraccionString","setItem","guardar","cotizacionData","createdAt","guardarCotizacion","fire","icon","title","showConfirmButton","timer","actualizarDescuento","calcularDescuento","descuentoAplicado","descuento","actualizarIdProducto","nuevoId","actualizarNombreProducto","nuevoNombre","nombre","actualizarPrecio","nuevoPrecio","parseFloat","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","name","onChange","empresa","type","readOnly","undefined","toFixed","onClick","isOpen","onRequestClose","contentLabel","style","PreviaCotizacion","numeroCotizacion","mostrarFormulario","cotizaciones","_c","_clientes$find","nombreCliente","c","acc","descuentoTotal","iva","_c2","$RefreshReg$"],"sources":["C:/Users/ALIENWARE/Documents/inventario-app/src/components/CotizacionForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Swal from 'sweetalert2';\r\nimport { collection, getDocs, serverTimestamp } from 'firebase/firestore';\r\nimport { db } from '../firebaseConfig';\r\nimport TablaCotizaciones from './TablaCotizaciones';\r\nimport Modal from 'react-modal';\r\n\r\n\r\n// Establece la función de inicialización de react-modal para evitar un aviso de desenfoque de accesibilidad\r\nModal.setAppElement('#root');\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    border: 'none',\r\n    borderRadius: '8px',\r\n    boxShadow: '0 4px 8px rgba(0, 0, 0, 0.1)',\r\n    padding: '20px',\r\n    maxWidth: '900px',\r\n    width: '100%',\r\n    height: \"500px\",\r\n    maxHeight: '90vh',\r\n    overflow: 'auto',\r\n    fontFamily: 'Roboto, sans-serif', // Aplica la fuente Roboto\r\n  },\r\n  label: {\r\n    display: 'block',\r\n    marginBottom: '10px',\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    padding: '8px',\r\n    marginBottom: '20px',\r\n    borderRadius: '5px',\r\n    border: '1px solid #ccc',\r\n    boxSizing: 'border-box',\r\n  },\r\n  button: {\r\n    width: '50%', // Centra el botón de agregar\r\n    padding: '10px',\r\n    borderRadius: '5px',\r\n    backgroundColor: '#007bff',\r\n    color: '#fff',\r\n    border: 'none',\r\n    cursor: 'pointer',\r\n    fontSize: '16px',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    margin: \"0 auto\",\r\n    fontWeight: \"700\"\r\n  },\r\n};\r\n\r\nfunction CotizacionForm(props) {\r\n  const [cliente, setCliente] = useState('');\r\n  const [clientes, setClientes] = useState([]);\r\n  const [productos, setProductos] = useState([]);\r\n  const [asunto, setAsunto] = useState('');\r\n  const [fechaCotizacion] = useState(getCurrentDate());\r\n  const [fechaVencimiento, setFechaVencimiento] = useState('');\r\n  const [productoSeleccionado, setProductoSeleccionado] = useState('');\r\n  const [productosSeleccionados, setProductosSeleccionados] = useState([]);\r\n  const [mostrarTabla, setMostrarTabla] = useState(false);\r\n  const [mostrarPrevia, setMostrarPrevia] = useState(false);\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n  const [ultimaInteraccion, setUltimaInteraccion] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Al cargar la página, intenta obtener la última interacción del almacenamiento local\r\n    const ultimaInteraccionGuardada = localStorage.getItem('ultimaInteraccion');\r\n    if (ultimaInteraccionGuardada) {\r\n      setUltimaInteraccion(ultimaInteraccionGuardada);\r\n    } else {\r\n      actualizarUltimaInteraccion(); // Si no hay ninguna guardada, muestra la hora actual\r\n    }\r\n  }, []);\r\n  \r\n\r\n  useEffect(() => {\r\n    obtenerClientes();\r\n    obtenerProductos();\r\n  }, []);\r\n\r\n  const abrirModalPrevia = (cotizacion) => {\r\n    setCotizacionSeleccionada(cotizacion);\r\n    setMostrarPrevia(true);\r\n  };\r\n  \r\n  const cerrarModalPrevia = () => {\r\n    setMostrarPrevia(false);\r\n    setModalIsOpen(false);\r\n  };\r\n\r\n  const calcularTotal = () => {\r\n    return productosSeleccionados.reduce((total, producto) => {\r\n      return total + producto.subtotal;\r\n    }, 0);\r\n  };\r\n\r\n  const obtenerClientes = async () => {\r\n    try {\r\n      const clientesSnapshot = await getDocs(collection(db, 'clientes'));\r\n      const listaClientes = clientesSnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n      setClientes(listaClientes);\r\n    } catch (error) {\r\n      console.error('Error al obtener clientes:', error);\r\n    }\r\n  };\r\n\r\n  const obtenerProductos = async () => {\r\n    try {\r\n      const productosSnapshot = await getDocs(collection(db, 'productos'));\r\n      const listaProductos = productosSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data(), tipoDescuento: 'cantidad', valorDescuento: 0 }));\r\n      setProductos(listaProductos);\r\n    } catch (error) {\r\n      console.error('Error al obtener los productos:', error);\r\n    }\r\n  };\r\n\r\n  const continuarDesdePrevia = () => {\r\n    setMostrarTabla(true);\r\n  };\r\n\r\n  function getCurrentDate() {\r\n    const date = new Date();\r\n    return date.toISOString().split('T')[0];\r\n  }\r\n\r\n  /*function agregarProducto() {\r\n    if (productoSeleccionado) {\r\n      const producto = productos.find(p => p.id === productoSeleccionado);\r\n      if (producto) {\r\n        setProductosSeleccionados([...productosSeleccionados, { ...producto, productoIdEditado: producto.id }]);\r\n        setProductoSeleccionado('');\r\n      }\r\n    }\r\n  }*/\r\n\r\n  const eliminarProducto = (idProducto) => {\r\n    setProductosSeleccionados(prevProductos => prevProductos.filter(producto => producto.id !== idProducto));\r\n  };\r\n\r\n  const actualizarCantidad = (idProducto, cantidad) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? { ...producto, cantidad: cantidad !== '' ? Number(cantidad) : 0, subtotal: (cantidad !== '' ? Number(cantidad) : 0) * producto.costo } : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  function agregarProductoAutomatico(e) {\r\n    const productoId = e.target.value;\r\n    const producto = productos.find(p => p.id === productoId);\r\n    if (producto) {\r\n      const productoExistente = productosSeleccionados.find(p => p.id === productoId);\r\n      if (productoExistente) {\r\n        const nuevaCantidad = productoExistente.cantidad + 1;\r\n        actualizarCantidad(productoExistente.id, nuevaCantidad);\r\n      } else {\r\n        const subtotal = producto.costo;\r\n        const productoConCantidad = { ...producto, cantidad: 1, subtotal, productoIdEditado: producto.id };\r\n        setProductosSeleccionados([...productosSeleccionados, productoConCantidad]);\r\n        setProductoSeleccionado('');\r\n      }\r\n    }\r\n  }\r\n\r\n  // Función para actualizar la última interacción\r\n  const actualizarUltimaInteraccion = () => {\r\n    const ahora = new Date();\r\n    const hora = ahora.getHours();\r\n    const minutos = ahora.getMinutes();\r\n    const periodo = hora >= 12 ? 'p.m.' : 'a.m.';\r\n    const horaFormato12 = hora > 12 ? hora - 12 : hora;\r\n    const horaString = horaFormato12.toString().padStart(2, '0');\r\n    const minutosString = minutos.toString().padStart(2, '0');\r\n    const ultimaInteraccionString = `Hoy a las ${horaString}:${minutosString} ${periodo}`;\r\n\r\n    // Guarda la hora en el almacenamiento local\r\n    localStorage.setItem('ultimaInteraccion', ultimaInteraccionString);\r\n\r\n    // Actualiza el estado para mostrar la última interacción al usuario\r\n    setUltimaInteraccion(ultimaInteraccionString);\r\n  };\r\n\r\n  const guardar = async () => {\r\n    try {\r\n      const cotizacionData = {\r\n        cliente,\r\n        asunto,\r\n        fechaCotizacion,\r\n        fechaVencimiento,\r\n        productosSeleccionados,\r\n        total: calcularTotal(),\r\n        createdAt: serverTimestamp()\r\n      };\r\n      await props.guardarCotizacion(cotizacionData);\r\n      setMostrarPrevia(true);\r\n      actualizarUltimaInteraccion(); // Llama a la función para actualizar la última interacción al guardar\r\n      // Muestra la alerta de éxito\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'Cotización Guardada',\r\n        showConfirmButton: false,\r\n        timer: 1000 // Muestra la alerta por 1.5 segundos\r\n      });\r\n    } catch (error) {\r\n      console.error('Error al guardar la cotización:', error);\r\n    }\r\n  };\r\n  \r\n\r\n  const actualizarDescuento = (idProducto, tipoDescuento, valorDescuento) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? calcularDescuento(producto, tipoDescuento, valorDescuento) : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  const calcularDescuento = (producto, tipoDescuento, valorDescuento) => {\r\n    let subtotal = producto.cantidad * producto.costo;\r\n    let descuentoAplicado = 0;\r\n\r\n    if (tipoDescuento === 'cantidad') {\r\n      subtotal -= valorDescuento;\r\n      descuentoAplicado = valorDescuento;\r\n    } else if (tipoDescuento === 'porcentaje') {\r\n      const descuento = (subtotal * valorDescuento) / 100;\r\n      subtotal -= descuento;\r\n      descuentoAplicado = descuento;\r\n    }\r\n\r\n    return { ...producto, tipoDescuento, valorDescuento, subtotal, descuento: descuentoAplicado };\r\n  };\r\n\r\n  const actualizarIdProducto = (idProducto, nuevoId) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? { ...producto, productoIdEditado: nuevoId } : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  const actualizarNombreProducto = (idProducto, nuevoNombre) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? { ...producto, nombre: nuevoNombre } : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  const actualizarPrecio = (idProducto, nuevoPrecio) => {\r\n    setProductosSeleccionados(prevProductos =>\r\n      prevProductos.map(producto =>\r\n        producto.id === idProducto ? { ...producto, costo: parseFloat(nuevoPrecio), subtotal: parseFloat(nuevoPrecio) * producto.cantidad } : producto\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"cotizacion-form\">\r\n      <form>\r\n        <div className=\"cotizacion-header\">\r\n          <img src=\"/img/logo-iciamex.png\" alt=\"ICIAMEX\" className=\"logoCotizacion\" />\r\n          <div className=\"border-right\"></div>\r\n          <h1 className=\"cotizacion-title\">Cotización</h1>\r\n        </div>\r\n\r\n        <div className=\"cotizacion-body\">\r\n          <label htmlFor=\"cliente\">Cliente:</label>\r\n          <select id=\"cliente\" name=\"cliente\" value={cliente} onChange={(e) => setCliente(e.target.value)}>\r\n            <option value=\"\">Seleccionar cliente</option>\r\n            {clientes.map((cliente) => (\r\n              <option key={cliente.id} value={cliente.id}>\r\n                {cliente.empresa}\r\n              </option>\r\n            ))}\r\n          </select><br />\r\n\r\n          <label htmlFor=\"asunto\">Asunto:</label>\r\n          <input type=\"text\" id=\"asunto\" name=\"asunto\" value={asunto} onChange={(e) => setAsunto(e.target.value)} /><br />\r\n\r\n          <label htmlFor=\"fecha-cotizacion\">Fecha de cotización:</label>\r\n          <input type=\"text\" id=\"fecha-cotizacion\" name=\"fecha-cotizacion\" value={getCurrentDate()} readOnly /><br />\r\n\r\n          <label htmlFor=\"fecha-vencimiento\">Fecha de vencimiento:</label>\r\n          <input type=\"date\" id=\"fecha-vencimiento\" name=\"fecha-vencimiento\" value={fechaVencimiento} onChange={(e) => setFechaVencimiento(e.target.value)} /><br />\r\n\r\n          <label htmlFor=\"productos\">Agregar Producto:</label>\r\n          <select id=\"productos\" name=\"productos\" value={productoSeleccionado} onChange={agregarProductoAutomatico}>\r\n            <option value=\"\">Seleccionar producto</option>\r\n            {productos.map((producto) => (\r\n              <option key={producto.id} value={producto.id}>\r\n                {producto.nombre}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          {/*<button type=\"button\" onClick={agregarProducto}>Agregar</button>*/}\r\n\r\n          <h2>Resumen:</h2>\r\n          <table className=\"productos-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Cantidad</th>\r\n                <th>ID</th>\r\n                <th>Descripción</th>\r\n                <th>Precio</th>\r\n                <th>Descuento</th>\r\n                <th>Subtotal</th>\r\n                <th>Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {productosSeleccionados.map((producto) => (\r\n                <tr key={producto.id}>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={producto.cantidad !== undefined ? producto.cantidad : ''}\r\n                      onChange={(e) => actualizarCantidad(producto.id, e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={producto.productoIdEditado}\r\n                      onChange={(e) => actualizarIdProducto(producto.id, e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={producto.nombre}\r\n                      onChange={(e) => actualizarNombreProducto(producto.id, e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={parseFloat(producto.costo).toFixed(2)}\r\n                      onChange={(e) => {\r\n                        actualizarPrecio(producto.id, e.target.value);\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <select\r\n                      value={producto.tipoDescuento}\r\n                      onChange={(e) => actualizarDescuento(producto.id, e.target.value, producto.valorDescuento)}\r\n                    >\r\n                      <option value=\"cantidad\">$</option>\r\n                      <option value=\"porcentaje\">%</option>\r\n                    </select>\r\n                    {producto.tipoDescuento === 'porcentaje' && '%'}\r\n                    <input\r\n                      type=\"text\"\r\n                      value={producto.valorDescuento}\r\n                      onChange={(e) => actualizarDescuento(producto.id, producto.tipoDescuento, e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>${parseFloat(producto.subtotal).toFixed(2)}</td>\r\n                  <td>\r\n                    <button onClick={() => eliminarProducto(producto.id)}>✘</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          <p>Guardado por última vez: {ultimaInteraccion}</p>\r\n          <button type=\"button\" onClick={abrirModalPrevia}>Vista Previa</button>\r\n          <button type=\"button\" onClick={guardar}>Guardar</button>\r\n        </div>\r\n      </form>\r\n\r\n      <Modal\r\n        isOpen={modalIsOpen}\r\n        onRequestClose={cerrarModalPrevia}\r\n        contentLabel=\"Vista Previa\"\r\n        style={customStyles}\r\n      >\r\n        {mostrarPrevia && (\r\n          <PreviaCotizacion\r\n            cliente={cliente}\r\n            clientes={clientes}\r\n            asunto={asunto}\r\n            fechaCotizacion={fechaCotizacion}\r\n            productosSeleccionados={productosSeleccionados}\r\n            continuarDesdePrevia={continuarDesdePrevia}\r\n            numeroCotizacion={props.numeroCotizacion}\r\n          />\r\n        )}\r\n        <div className=\"modal-buttons\">\r\n          <button onClick={cerrarModalPrevia} className='eliminarBtnModal'>Cerrar</button>\r\n          <button>Enviar por Correo</button>\r\n          <button>Descargar</button>\r\n        </div>\r\n      </Modal>\r\n\r\n      {!mostrarFormulario && (\r\n        <TablaCotizaciones cotizaciones={cotizaciones} abrirModalPrevia={abrirModalPrevia} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PreviaCotizacion({ cliente, clientes, asunto, fechaCotizacion, productosSeleccionados, numeroCotizacion }) { \r\n  \r\n    const nombreCliente = clientes.find(c => c.id === cliente)?.empresa || '';\r\n\r\n    // Calcular subtotal\r\n    const subtotal = productosSeleccionados.reduce((acc, producto) => acc + parseFloat(producto.subtotal), 0);\r\n\r\n    // Calcular descuento total (suponiendo que hay un descuento en cada producto)\r\n    const descuentoTotal = productosSeleccionados.reduce((acc, producto) => acc + parseFloat(producto.descuento), 0);\r\n  \r\n    // Calcular IVA\r\n    const iva = subtotal * 0.16; // Suponiendo que el IVA es del 16%\r\n  \r\n    // Calcular total\r\n    const total = subtotal - descuentoTotal + iva;\r\n\r\n    \r\n\r\n  return (\r\n    <div className=\"previa-cotizacion\">\r\n       <div className=\"cotizacion-header\">\r\n          <img src=\"/img/logo-iciamex.png\" alt=\"ICIAMEX\" className=\"logoCotizacion\" />\r\n          <div className=\"border-right\"></div>\r\n          <h1 className=\"cotizacion-title\">Cotización</h1>\r\n      </div>\r\n      <h1>Previa</h1>\r\n      <h2>Cotización: {numeroCotizacion?.toString().padStart(4, '0')}</h2>\r\n      <hr />\r\n      <p>Fecha de cotización: {fechaCotizacion}</p>\r\n      <p>Asunto: {asunto}</p>\r\n      <p>Cliente: {nombreCliente}</p>\r\n      <h3>DESCRIPCIÓN</h3>\r\n      <table className=\"productos-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Cantidad</th>\r\n            <th>ID</th>\r\n            <th>Descripción</th>\r\n            <th>Precio</th>\r\n            <th>Descuento</th>\r\n            <th>Subtotal</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {productosSeleccionados.map((producto) => (\r\n            <tr key={producto.id}>\r\n              <td>{producto.cantidad}</td>\r\n              <td>{producto.productoIdEditado}</td>\r\n              <td>{producto.nombre}</td>\r\n              <td>${parseFloat(producto.costo).toFixed(2)}</td>\r\n              <td>${parseFloat(producto.descuento).toFixed(2)}</td>\r\n              <td>${parseFloat(producto.subtotal).toFixed(2)}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      <h3>Subtotal: ${subtotal.toFixed(2)}</h3>\r\n      <h3>Descuento: ${descuentoTotal.toFixed(2)}</h3>\r\n      <h3>IVA: ${iva.toFixed(2)}</h3>\r\n      <h3>Total: ${total.toFixed(2)}</h3>\r\n\r\n    </div>\r\n    \r\n  );\r\n}\r\n\r\nexport default CotizacionForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}