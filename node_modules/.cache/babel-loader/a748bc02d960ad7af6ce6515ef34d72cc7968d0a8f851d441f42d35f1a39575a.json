{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ALIENWARE\\\\Documents\\\\inventario-app\\\\src\\\\pages\\\\cotizacion.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, addDoc } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nimport CotizacionForm from '../components/CotizacionForm';\nimport TablaCotizaciones from '../components/TablaCotizaciones';\nimport PreviaCotizacion from '../components/PreviaCotizacion';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MySwal = withReactContent(Swal);\n_c = MySwal;\nfunction CotizacionesContainer() {\n  _s();\n  const [cotizaciones, setCotizaciones] = useState([]);\n  const [mostrarFormulario, setMostrarFormulario] = useState(true);\n  const [mostrarPrevia, setMostrarPrevia] = useState(false);\n  const [cotizacionSeleccionada, setCotizacionSeleccionada] = useState(null);\n  const [clientes, setClientes] = useState([]);\n  const [numeroCotizacion, setNumeroCotizacion] = useState(null);\n  useEffect(() => {\n    obtenerCotizaciones();\n    obtenerClientes();\n    obtenerUltimoNumeroCotizacion();\n  }, []);\n  const obtenerCotizaciones = async () => {\n    try {\n      const cotizacionesSnapshot = await getDocs(collection(db, 'cotizaciones'));\n      const listaCotizaciones = cotizacionesSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setCotizaciones(listaCotizaciones);\n    } catch (error) {\n      console.error('Error al obtener las cotizaciones:', error);\n    }\n  };\n  const obtenerClientes = async () => {\n    try {\n      const clientesSnapshot = await getDocs(collection(db, 'clientes'));\n      const listaClientes = clientesSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setClientes(listaClientes);\n    } catch (error) {\n      console.error('Error al obtener los clientes:', error);\n    }\n  };\n  const guardarCotizacion = async cotizacionData => {\n    try {\n      if (!cotizacionData.cliente || !cotizacionData.asunto || !cotizacionData.fechaVencimiento || cotizacionData.productosSeleccionados.length === 0) {\n        MySwal.fire({\n          icon: 'error',\n          title: 'Oops...',\n          text: 'Todos los campos son obligatorios'\n        });\n        return;\n      }\n      const cliente = clientes.find(cliente => cliente.id === cotizacionData.cliente);\n      if (!cliente) {\n        console.error('Cliente no encontrado');\n        return;\n      }\n      const cotizacion = {\n        ...cotizacionData,\n        nombreCliente: cliente.empresa // Asignar el nombre del cliente en lugar de su ID\n      };\n      const docRef = await addDoc(collection(db, 'cotizaciones'), cotizacion);\n      console.log('Cotizaci贸n guardada con ID: ', docRef.id);\n      obtenerCotizaciones();\n      setMostrarFormulario(false);\n    } catch (error) {\n      console.error('Error al guardar la cotizaci贸n:', error);\n    }\n  };\n  const verPrevia = cotizacion => {\n    setCotizacionSeleccionada(cotizacion);\n    setMostrarPrevia(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: mostrarFormulario ? /*#__PURE__*/_jsxDEV(CotizacionForm, {\n      guardarCotizacion: guardarCotizacion,\n      clientes: clientes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this) : mostrarPrevia ? /*#__PURE__*/_jsxDEV(PreviaCotizacion, {\n      cotizacion: cotizacionSeleccionada,\n      cerrarPrevia: () => setMostrarPrevia(false),\n      clientes: clientes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(TablaCotizaciones, {\n      cotizaciones: cotizaciones,\n      verPrevia: verPrevia,\n      clientes: clientes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(CotizacionesContainer, \"7lMi+tLmU4kk039Yn3LO9Glij5s=\");\n_c2 = CotizacionesContainer;\nexport default CotizacionesContainer;\nvar _c, _c2;\n$RefreshReg$(_c, \"MySwal\");\n$RefreshReg$(_c2, \"CotizacionesContainer\");","map":{"version":3,"names":["React","useState","useEffect","collection","getDocs","addDoc","db","Swal","withReactContent","CotizacionForm","TablaCotizaciones","PreviaCotizacion","jsxDEV","_jsxDEV","MySwal","_c","CotizacionesContainer","_s","cotizaciones","setCotizaciones","mostrarFormulario","setMostrarFormulario","mostrarPrevia","setMostrarPrevia","cotizacionSeleccionada","setCotizacionSeleccionada","clientes","setClientes","numeroCotizacion","setNumeroCotizacion","obtenerCotizaciones","obtenerClientes","obtenerUltimoNumeroCotizacion","cotizacionesSnapshot","listaCotizaciones","docs","map","doc","id","data","error","console","clientesSnapshot","listaClientes","guardarCotizacion","cotizacionData","cliente","asunto","fechaVencimiento","productosSeleccionados","length","fire","icon","title","text","find","cotizacion","nombreCliente","empresa","docRef","log","verPrevia","children","fileName","_jsxFileName","lineNumber","columnNumber","cerrarPrevia","_c2","$RefreshReg$"],"sources":["C:/Users/ALIENWARE/Documents/inventario-app/src/pages/cotizacion.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { collection, getDocs, addDoc } from 'firebase/firestore';\r\nimport { db } from '../firebaseConfig';\r\nimport Swal from 'sweetalert2';\r\nimport withReactContent from 'sweetalert2-react-content';\r\nimport CotizacionForm from '../components/CotizacionForm';\r\nimport TablaCotizaciones from '../components/TablaCotizaciones';\r\nimport PreviaCotizacion from '../components/PreviaCotizacion';\r\n\r\nconst MySwal = withReactContent(Swal);\r\n\r\nfunction CotizacionesContainer() {\r\n  const [cotizaciones, setCotizaciones] = useState([]);\r\n  const [mostrarFormulario, setMostrarFormulario] = useState(true);\r\n  const [mostrarPrevia, setMostrarPrevia] = useState(false);\r\n  const [cotizacionSeleccionada, setCotizacionSeleccionada] = useState(null);\r\n  const [clientes, setClientes] = useState([]);\r\n  const [numeroCotizacion, setNumeroCotizacion] = useState(null);\r\n\r\n  useEffect(() => {\r\n    obtenerCotizaciones();\r\n    obtenerClientes();\r\n    obtenerUltimoNumeroCotizacion();\r\n  }, []);\r\n\r\n  const obtenerCotizaciones = async () => {\r\n    try {\r\n      const cotizacionesSnapshot = await getDocs(collection(db, 'cotizaciones'));\r\n      const listaCotizaciones = cotizacionesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setCotizaciones(listaCotizaciones);\r\n    } catch (error) {\r\n      console.error('Error al obtener las cotizaciones:', error);\r\n    }\r\n  };\r\n\r\n  const obtenerClientes = async () => {\r\n    try {\r\n      const clientesSnapshot = await getDocs(collection(db, 'clientes'));\r\n      const listaClientes = clientesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setClientes(listaClientes);\r\n    } catch (error) {\r\n      console.error('Error al obtener los clientes:', error);\r\n    }\r\n  };\r\n\r\n  const guardarCotizacion = async (cotizacionData) => {\r\n    try {\r\n      if (!cotizacionData.cliente || !cotizacionData.asunto || !cotizacionData.fechaVencimiento || cotizacionData.productosSeleccionados.length === 0) {\r\n        MySwal.fire({\r\n          icon: 'error',\r\n          title: 'Oops...',\r\n          text: 'Todos los campos son obligatorios',\r\n        });\r\n        return;\r\n      }\r\n  \r\n      const cliente = clientes.find(cliente => cliente.id === cotizacionData.cliente);\r\n      if (!cliente) {\r\n        console.error('Cliente no encontrado');\r\n        return;\r\n      }\r\n  \r\n      const cotizacion = {\r\n        ...cotizacionData,\r\n        nombreCliente: cliente.empresa, // Asignar el nombre del cliente en lugar de su ID\r\n      };\r\n  \r\n      const docRef = await addDoc(collection(db, 'cotizaciones'), cotizacion);\r\n      console.log('Cotizaci贸n guardada con ID: ', docRef.id);\r\n      obtenerCotizaciones();\r\n      setMostrarFormulario(false);\r\n    } catch (error) {\r\n      console.error('Error al guardar la cotizaci贸n:', error);\r\n    }\r\n  };\r\n\r\n  const verPrevia = (cotizacion) => {\r\n    setCotizacionSeleccionada(cotizacion);\r\n    setMostrarPrevia(true);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {mostrarFormulario ? (\r\n        <CotizacionForm guardarCotizacion={guardarCotizacion} clientes={clientes} /> \r\n      ) : mostrarPrevia ? (\r\n        <PreviaCotizacion cotizacion={cotizacionSeleccionada} cerrarPrevia={() => setMostrarPrevia(false)} clientes={clientes} /> \r\n      ) : (\r\n        <TablaCotizaciones cotizaciones={cotizaciones} verPrevia={verPrevia} clientes={clientes} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CotizacionesContainer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}